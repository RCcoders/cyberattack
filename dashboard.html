<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>CyberLab ‚Äî Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Orbitron:wght@500;700&display=swap"
        rel="stylesheet">
    <style>
        *,
        *::before,
        *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            background: #0a0a0f;
            font-family: 'JetBrains Mono', monospace;
            color: #e0e0e0;
            overflow-x: hidden;
        }

        /* Grid background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(rgba(0, 255, 65, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 65, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            z-index: 0;
            pointer-events: none;
        }

        /* Navbar */
        .navbar {
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 32px;
            background: rgba(10, 10, 15, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0, 255, 65, 0.1);
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .nav-brand .logo {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            background: linear-gradient(135deg, #00ff41, #00cc33);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            box-shadow: 0 0 15px rgba(0, 255, 65, 0.3);
        }

        .nav-brand h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            color: #00ff41;
            letter-spacing: 2px;
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .user-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 14px;
            background: rgba(0, 255, 65, 0.06);
            border: 1px solid rgba(0, 255, 65, 0.12);
            border-radius: 10px;
            font-size: 0.78rem;
            color: rgba(255, 255, 255, 0.6);
        }

        .user-badge .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #00ff41;
            box-shadow: 0 0 8px #00ff41;
            animation: blink 2s ease-in-out infinite;
        }

        @keyframes blink {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.4;
            }
        }

        .logout-btn {
            padding: 8px 18px;
            background: rgba(255, 68, 68, 0.1);
            border: 1px solid rgba(255, 68, 68, 0.25);
            border-radius: 10px;
            color: #ff4444;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .logout-btn:hover {
            background: rgba(255, 68, 68, 0.2);
            box-shadow: 0 0 15px rgba(255, 68, 68, 0.15);
        }

        /* Main Content */
        .main {
            position: relative;
            z-index: 10;
            max-width: 900px;
            margin: 40px auto;
            padding: 0 24px;
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Section Header */
        .section-header {
            margin-bottom: 32px;
        }

        .section-header h2 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.3rem;
            color: #fff;
            margin-bottom: 8px;
        }

        .section-header p {
            color: rgba(255, 255, 255, 0.35);
            font-size: 0.8rem;
            line-height: 1.6;
        }

        /* Generator Card */
        .gen-card {
            background: rgba(12, 12, 20, 0.85);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 255, 65, 0.12);
            border-radius: 20px;
            padding: 36px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
        }

        /* URL Input */
        .url-section {
            margin-bottom: 28px;
        }

        .url-section label {
            display: block;
            font-size: 0.72rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: rgba(0, 255, 65, 0.6);
            margin-bottom: 10px;
        }

        .url-row {
            display: flex;
            gap: 10px;
        }

        .url-row input {
            flex: 1;
            padding: 14px 16px;
            background: rgba(0, 255, 65, 0.04);
            border: 1px solid rgba(0, 255, 65, 0.12);
            border-radius: 12px;
            color: #e0e0e0;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            outline: none;
            transition: all 0.3s ease;
        }

        .url-row input:focus {
            border-color: rgba(0, 255, 65, 0.5);
            background: rgba(0, 255, 65, 0.07);
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.08);
        }

        .url-row input::placeholder {
            color: rgba(255, 255, 255, 0.2);
        }

        .auto-btn {
            padding: 14px 20px;
            background: rgba(0, 255, 65, 0.08);
            border: 1px solid rgba(0, 255, 65, 0.2);
            border-radius: 12px;
            color: #00ff41;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.72rem;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .auto-btn:hover {
            background: rgba(0, 255, 65, 0.15);
        }

        /* Generate Button */
        .generate-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #00ff41, #00cc33);
            border: none;
            border-radius: 12px;
            color: #000;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.85rem;
            font-weight: 700;
            letter-spacing: 3px;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .generate-btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.25), transparent);
            transition: left 0.5s ease;
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0, 255, 65, 0.35);
        }

        .generate-btn:hover::after {
            left: 100%;
        }

        /* QR Output Area */
        .qr-output {
            display: none;
            margin-top: 36px;
            text-align: center;
            animation: fadeIn 0.5s ease-out;
        }

        .qr-output.show {
            display: block;
        }

        .qr-wrapper {
            display: inline-block;
            background: #fff;
            padding: 20px;
            border-radius: 16px;
            box-shadow: 0 0 40px rgba(0, 255, 65, 0.1);
            margin-bottom: 20px;
        }

        .qr-wrapper canvas {
            display: block !important;
        }

        .qr-target-url {
            color: rgba(255, 255, 255, 0.3);
            font-size: 0.72rem;
            margin-bottom: 20px;
            word-break: break-all;
            padding: 10px 16px;
            background: rgba(0, 255, 65, 0.04);
            border-radius: 8px;
            border: 1px dashed rgba(0, 255, 65, 0.1);
        }

        .qr-target-url span {
            color: #00ff41;
        }

        .action-btns {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .action-btns button {
            padding: 12px 24px;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.78rem;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 1px;
        }

        .download-btn {
            background: linear-gradient(135deg, #00ff41, #00cc33);
            border: none;
            color: #000;
            font-weight: 700;
        }

        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 255, 65, 0.3);
        }

        .copy-btn {
            background: rgba(0, 153, 255, 0.1);
            border: 1px solid rgba(0, 153, 255, 0.25);
            color: #0099ff;
        }

        .copy-btn:hover {
            background: rgba(0, 153, 255, 0.2);
        }

        .reset-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.5);
        }

        .reset-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Info Cards */
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin-top: 32px;
        }

        .info-card {
            background: rgba(12, 12, 20, 0.7);
            border: 1px solid rgba(0, 255, 65, 0.08);
            border-radius: 14px;
            padding: 24px;
            transition: all 0.3s ease;
        }

        .info-card:hover {
            border-color: rgba(0, 255, 65, 0.2);
            transform: translateY(-3px);
        }

        .info-card .emoji {
            font-size: 28px;
            margin-bottom: 12px;
        }

        .info-card h3 {
            font-size: 0.85rem;
            color: #fff;
            margin-bottom: 6px;
        }

        .info-card p {
            font-size: 0.72rem;
            color: rgba(255, 255, 255, 0.35);
            line-height: 1.5;
        }

        /* Toast notification */
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(80px);
            background: rgba(0, 255, 65, 0.15);
            border: 1px solid rgba(0, 255, 65, 0.3);
            backdrop-filter: blur(20px);
            padding: 12px 28px;
            border-radius: 12px;
            color: #00ff41;
            font-size: 0.8rem;
            z-index: 1000;
            transition: transform 0.4s ease;
            pointer-events: none;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
        }

        /* Responsive */
        @media (max-width: 600px) {
            .navbar {
                padding: 12px 16px;
            }

            .nav-brand h1 {
                display: none;
            }

            .main {
                padding: 0 16px;
                margin: 24px auto;
            }

            .gen-card {
                padding: 24px 18px;
            }

            .url-row {
                flex-direction: column;
            }

            .info-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>

    <!-- Navbar -->
    <nav class="navbar">
        <div class="nav-brand">
            <div class="logo">üõ°Ô∏è</div>
            <h1>CYBERLAB</h1>
        </div>
        <div class="nav-right">
            <div class="user-badge">
                <div class="dot"></div>
                <span id="usernameDisplay">admin</span>
            </div>
            <button class="logout-btn" id="logoutBtn">‚èª Logout</button>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="main">
        <div class="section-header">
            <h2>‚ö° QR Code Generator</h2>
            <p>Generate a QR code that links to the awareness script. When someone scans it, they'll experience a
                simulated cyber attack scenario ‚Äî demonstrating the dangers of scanning unknown QR codes.</p>
        </div>

        <div class="gen-card">
            <div class="url-section">
                <label>Target Payload URL</label>
                <div class="url-row">
                    <input type="url" id="targetUrl" placeholder="https://your-domain.com/qr_awareness.html">
                    <button class="auto-btn" id="autoFillBtn" title="Use local awareness page">‚ö° Auto-fill</button>
                </div>
            </div>

            <button class="generate-btn" id="generateBtn">üî≤ Generate QR Code</button>

            <div class="qr-output" id="qrOutput">
                <div class="qr-wrapper" id="qrWrapper">
                    <div id="qrcode"></div>
                </div>
                <div class="qr-target-url">
                    Target: <span id="displayUrl"></span>
                </div>
                <div class="action-btns">
                    <button class="download-btn" id="downloadBtn">‚¨á Download QR</button>
                    <button class="copy-btn" id="copyBtn">üìã Copy URL</button>
                    <button class="reset-btn" id="resetBtn">‚Üª Reset</button>
                </div>
            </div>
        </div>

        <!-- Info Cards -->
        <div class="info-grid">
            <div class="info-card">
                <div class="emoji">üì±</div>
                <h3>How It Works</h3>
                <p>Share the generated QR code. When scanned, it opens the awareness page that simulates a malicious
                    trap.</p>
            </div>
            <div class="info-card">
                <div class="emoji">üéì</div>
                <h3>Educational Purpose</h3>
                <p>This tool is for cybersecurity awareness training. It teaches people to be cautious about scanning
                    unknown QR codes.</p>
            </div>
            <div class="info-card">
                <div class="emoji">‚ö†Ô∏è</div>
                <h3>What the Script Does</h3>
                <p>The awareness page traps the back button, blocks interactions for a few seconds, then shows a warning
                    message about QR code dangers.</p>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <!-- QR Code Library -->
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>

    <script>
        // ============ AUTH GUARD ============
        if (localStorage.getItem('cyberlab_auth') !== 'true') {
            window.location.href = 'login.html';
        }

        // Show username
        const username = localStorage.getItem('cyberlab_user') || 'unknown';
        document.getElementById('usernameDisplay').textContent = username;

        // ============ LOGOUT ============
        document.getElementById('logoutBtn').addEventListener('click', () => {
            localStorage.removeItem('cyberlab_auth');
            localStorage.removeItem('cyberlab_user');
            window.location.href = 'login.html';
        });

        // ============ AUTO-FILL ============
        document.getElementById('autoFillBtn').addEventListener('click', () => {
            // Auto-detect the base URL of the current page
            const base = window.location.href.substring(0, window.location.href.lastIndexOf('/') + 1);
            document.getElementById('targetUrl').value = base + 'qr_awareness.html';
            showToast('‚úì URL auto-filled');
        });

        // ============ QR CODE GENERATION ============
        let currentQR = null;

        document.getElementById('generateBtn').addEventListener('click', () => {
            const url = document.getElementById('targetUrl').value.trim();

            if (!url) {
                showToast('‚ö† Please enter a target URL');
                return;
            }

            // Clear previous QR
            const qrDiv = document.getElementById('qrcode');
            qrDiv.innerHTML = '';

            // Generate new QR
            currentQR = new QRCode(qrDiv, {
                text: url,
                width: 220,
                height: 220,
                colorDark: '#000000',
                colorLight: '#ffffff',
                correctLevel: QRCode.CorrectLevel.H
            });

            // Show output area
            document.getElementById('displayUrl').textContent = url;
            document.getElementById('qrOutput').classList.add('show');

            showToast('‚úì QR code generated!');
        });

        // ============ DOWNLOAD QR ============
        document.getElementById('downloadBtn').addEventListener('click', () => {
            const canvas = document.querySelector('#qrcode canvas');
            if (!canvas) {
                // Try img fallback
                const img = document.querySelector('#qrcode img');
                if (img) {
                    const link = document.createElement('a');
                    link.download = 'cyberlab-qr-code.png';
                    link.href = img.src;
                    link.click();
                }
                return;
            }

            const link = document.createElement('a');
            link.download = 'cyberlab-qr-code.png';
            link.href = canvas.toDataURL('image/png');
            link.click();

            showToast('‚úì QR code downloaded!');
        });

        // ============ COPY URL ============
        document.getElementById('copyBtn').addEventListener('click', () => {
            const url = document.getElementById('targetUrl').value.trim();
            if (url) {
                navigator.clipboard.writeText(url).then(() => {
                    showToast('‚úì URL copied to clipboard');
                }).catch(() => {
                    // Fallback
                    const input = document.createElement('input');
                    input.value = url;
                    document.body.appendChild(input);
                    input.select();
                    document.execCommand('copy');
                    document.body.removeChild(input);
                    showToast('‚úì URL copied to clipboard');
                });
            }
        });

        // ============ RESET ============
        document.getElementById('resetBtn').addEventListener('click', () => {
            document.getElementById('qrcode').innerHTML = '';
            document.getElementById('qrOutput').classList.remove('show');
            document.getElementById('targetUrl').value = '';
            showToast('‚Üª Reset complete');
        });

        // ============ TOAST ============
        function showToast(msg) {
            const toast = document.getElementById('toast');
            toast.textContent = msg;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 2500);
        }
    </script>

</body>

</html>